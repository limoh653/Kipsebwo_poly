<!DOCTYPE html>
<html>
<head>
    <title>Kipsebwo - Sign Up</title>
    <style>
        body { font-family: Arial, sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; background-color: #f4f4f4; margin: 0; }
        .register-card { background: white; padding: 30px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); width: 400px; }
        h2 { text-align: center; color: #333; margin-top: 0; }
        
        /* Style for form fields (Inputs and the Dropdown) */
        form p { margin-bottom: 15px; }
        form input, form select { 
            width: 100%; 
            padding: 10px; 
            border: 1px solid #ccc; 
            border-radius: 4px; 
            box-sizing: border-box; /* Ensures padding doesn't break width */
            font-size: 14px;
        }
        
        /* Styling the dropdown specifically */
        form select {
            background-color: #fff;
            cursor: pointer;
        }

        /* Error Message Styling */
        .errorlist { color: #dc3545; background: #f8d7da; padding: 10px; border-radius: 4px; list-style: none; margin: 0 0 15px 0; font-size: 0.9em; border: 1px solid #f5c6cb; }
        .field-error { color: #dc3545; font-size: 0.85em; margin-top: 5px; display: block; }

        button { width: 100%; padding: 12px; background-color: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 1em; font-weight: bold; }
        button:hover { background-color: #218838; }
        .links { margin-top: 20px; text-align: center; font-size: 0.9em; border-top: 1px solid #eee; padding-top: 15px; }
        a { color: #007bff; text-decoration: none; }
        a:hover { text-decoration: underline; }

        label { font-weight: bold; color: #555; font-size: 0.9em; }
    </style>
</head>
<body>
    <div class="register-card">
        <h2>Create Account</h2>

        <form method="POST">
            {% csrf_token %}

            {# This catch-all block will show the "Department is full" error if it happens #}
            {% if form.non_field_errors %}
                <div class="errorlist">
                    {% for error in form.non_field_errors %}
                        {{ error }}
                    {% endfor %}
                </div>
            {% endif %}

            {# This loop handles Username, Password, and your new Department dropdown #}
            {% for field in form %}
                <p>
                    <label for="{{ field.id_for_label }}">{{ field.label }}</label><br>
                    {{ field }}
                    {% if field.errors %}
                        {% for error in field.errors %}
                            <span class="field-error">{{ error }}</span>
                        {% endfor %}
                    {% endif %}
                </p>
            {% endfor %}

            <button type="submit">Register Now</button>
        </form>

        <div class="links">
            <p>Already have an account? <a href="{% url 'login' %}">Login here</a></p>
        </div>
    </div>
</body>
</html>